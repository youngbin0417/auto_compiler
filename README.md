# pl0compiler

이 프로젝트는 PL/0 언어의 컴파일러 및 인터프리터를 구현한 것입니다.  
PL/0은 교육용으로 설계된 간단한 프로그래밍 언어로, Niklaus Wirth가 Pascal을 설계할 때 사용한 언어입니다.

## 기능 개선 사항

### 1. 오류 처리 개선
- 오류 발생 시 더 정확한 위치 정보(행, 열)를 제공합니다.
- 오류 메시지를 표준 오류 스트림(stderr)으로 출력하여, 오류와 일반 출력을 구분할 수 있습니다.

### 2. 심볼 테이블 관리 개선
- 배열 변수의 오프셋 관리가 개선되어, 배열 요소에 대한 접근 및 할당 연산이 더 정확하게 수행됩니다.
- 중복된 심볼 선언 시 더 명확한 오류 메시지를 제공합니다.

### 3. 코드 생성 최적화
- 상수 연산에 대한 최적화를 구현하여, 컴파일 시점에 계산을 수행하고 불필요한 명령어를 제거합니다.
- 덧셈, 뺄셈, 곱셈, 나눗셈, 단항 마이너스 연산에 대한 최적화가 적용됩니다.
- 0으로 나누는 경우에 대한 오류 처리를 추가했습니다.

### 4. 문법 확장
- 함수 매개변수를 지원하도록 문법을 확장했습니다.
  - 함수 정의: `procedure proc_name(param1, param2, ...);`
  - 함수 호출: `call proc_name(expr1, expr2, ...)` 
- 이를 통해 더 복잡한 프로그램을 작성할 수 있게 되었습니다.

### 5. 디버깅 기능 추가
- 프로그램 실행 추적 기능을 추가하여, 각 명령어의 실행 흐름을 확인할 수 있습니다.
- 변수 값 모니터링 기능을 추가하여, 실행 중인 프로그램의 스택 상태를 실시간으로 확인할 수 있습니다.
- 디버그 모드는 컴파일 시 `-DDEBUG` 플래그를 추가하여 활성화할 수 있습니다.

## 사용 방법

1. lexical analyzer 생성:
   ```bash
   flex 202010458.l
   ```

2. parser 생성:
   ```bash
   yacc -d 202020458.y
   ```

3. 컴파일:
   ```bash
   gcc y.tab.c -o pl0compiler
   ```

4. 프로그램 실행 (디버그 모드 포함):
   ```bash
   ./pl0compiler < examples/sample.pl0
   ```

   디버그 모드로 실행하려면:
   ```bash
   gcc -DDEBUG y.tab.c -o pl0compiler
   ./pl0compiler < examples/sample.pl0
   ```

## 예제

`examples/` 디렉토리에 다양한 PL/0 프로그램 예제가 포함되어 있습니다:
- `fibo_sum.pl0`: 피보나치 수열의 합을 계산하는 프로그램
- `mul_gcd.pl0`: 두 수의 최대공약수를 구하는 프로그램
- `sample.pl0`: 기본적인 변수 선언과 연산을 보여주는 프로그램
- `sort_bubble.pl0`: 버블 정렬을 구현한 프로그램

## 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다.